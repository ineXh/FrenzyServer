function Ball(t,i,s,h,e){this.init(t,i,s),(void 0==h||1==h)&&(void 0==e?(this.toDraw=!0,this.draw()):(this.toDrawSprite=!0,this.drawSprite(e)))}Ball.prototype={init:function(t,i,s){this.clr=getRndColor(),this.pos=new PVector(t,i),this.vel=new PVector(Math.random()*width/10,Math.random()*height/10),this.accel=new PVector(1,0),this.r=s,this.width=2*this.r,this.height=2*this.r,this.maxspeed=width/100,this.border=!0},drawSprite:function(t){this.sprite=new PIXI.Sprite(t),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.scale=this.r/(this.sprite.width<this.sprite.height?this.sprite.width:this.sprite.height),this.sprite.scale.set(this.scale),stage.addChild(this.sprite)},draw:function(){this.graphics=new PIXI.Graphics,this.graphics.x=this.pos.x,this.graphics.y=this.pos.x,this.graphics.beginFill(this.clr),this.graphics.drawCircle(0,0,this.r),this.graphics.endFill(),stage.addChild(this.graphics)},setCollision:function(t){this.others=t},addCollisionObjects:function(t){this.others.push(t)},collide:function(t){if(t==this)return!1;if(isIntersecting(this.sprite,t.sprite)){var i=t.pos.x-this.pos.x,s=t.pos.y-this.pos.y,h=t.r+this.r,e=Math.atan2(s,i),r=t.pos.x+Math.cos(e)*h,o=t.pos.y+Math.sin(e)*h,p=(r-t.pos.x)*spring,a=(o-t.pos.y)*spring;return this.vel.x-=p,this.vel.y-=a,t.vel.x+=p,t.vel.y-=p,this.collision_count++,t.collision_count++,!0}return!1},update:function(t){this.move(t),this.toDraw&&this.render(),this.toDrawSprite&&this.renderSprite()},move:function(t){this.vel.add(this.accel),this.vel.mult(damping),this.vel.limit(this.maxspeed),this.pos.add(this.vel),this.accel.mult(0),this.border&&this.stayinBorder()},render:function(){this.graphics.x=this.pos.x,this.graphics.y=this.pos.y},renderSprite:function(){this.sprite.x=this.pos.x,this.sprite.y=this.pos.y,this.sprite.rotation+=.01},stayinBorder:function(){return this.pos.x-this.r<0?(this.pos.x=this.r,this.vel.x=this.vel.x*walldamp,!0):this.pos.x+this.r>stage_width?(this.vel.x=this.vel.x*walldamp,this.pos.x=stage_width-this.r,!0):this.pos.y-this.r<0?(this.vel.y=this.vel.y*walldamp,this.pos.y=this.r,!0):this.pos.y+this.r>stage_height?(this.vel.y=this.vel.y*walldamp,this.pos.y=stage_height-this.r,!0):!1}};