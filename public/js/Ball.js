function Ball(a,b,c,d,e){this.init(a,b,c),(void 0==d||1==d)&&(void 0==e?(this.toDraw=!0,this.draw()):(this.toDrawSprite=!0,this.drawSprite(e)))}Ball.prototype={init:function(a,b,c){this.clr=getRndColor(),this.pos=new PVector(a,b),this.vel=new PVector(Math.random()*width/10,Math.random()*height/10),this.accel=new PVector(1,0),this.r=c,this.width=2*this.r,this.height=2*this.r,this.maxspeed=width/100,this.border=!0},drawSprite:function(a){this.sprite=new PIXI.Sprite(a),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.scale=this.r/(this.sprite.width<this.sprite.height?this.sprite.width:this.sprite.height),this.sprite.scale.set(this.scale),stage.addChild(this.sprite)},draw:function(){this.graphics=new PIXI.Graphics,this.graphics.x=this.pos.x,this.graphics.y=this.pos.x,this.graphics.beginFill(this.clr),this.graphics.drawCircle(0,0,this.r),this.graphics.endFill(),stage.addChild(this.graphics)},setCollision:function(a){this.others=a},addCollisionObjects:function(a){this.others.push(a)},collide:function(a){if(a==this)return!1;if(isIntersecting(this.sprite,a.sprite)){var b=a.pos.x-this.pos.x,c=a.pos.y-this.pos.y,d=a.r+this.r,e=Math.atan2(c,b),f=a.pos.x+Math.cos(e)*d,g=a.pos.y+Math.sin(e)*d,h=(f-a.pos.x)*spring,i=(g-a.pos.y)*spring;return this.vel.x-=h,this.vel.y-=i,a.vel.x+=h,a.vel.y-=h,this.collision_count++,a.collision_count++,!0}return!1},update:function(a){this.move(a),this.toDraw&&this.render(),this.toDrawSprite&&this.renderSprite()},move:function(a){this.vel.add(this.accel),this.vel.mult(damping),this.vel.limit(this.maxspeed),this.pos.add(this.vel),this.accel.mult(0),this.border&&this.stayinBorder()},render:function(){this.graphics.x=this.pos.x,this.graphics.y=this.pos.y},renderSprite:function(){this.sprite.x=this.pos.x,this.sprite.y=this.pos.y,this.sprite.rotation+=.01},stayinBorder:function(){return this.pos.x-this.r<0?(this.pos.x=this.r,this.vel.x=this.vel.x*walldamp,!0):this.pos.x+this.r>stage_width?(this.vel.x=this.vel.x*walldamp,this.pos.x=stage_width-this.r,!0):this.pos.y-this.r<0?(this.vel.y=this.vel.y*walldamp,this.pos.y=this.r,!0):this.pos.y+this.r>stage_height?(this.vel.y=this.vel.y*walldamp,this.pos.y=stage_height-this.r,!0):!1}};