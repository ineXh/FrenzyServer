function MiniMap(){this.create()}MiniMap.prototype={create:function(){this.map=new PIXI.Container,this.border_box=new PIXI.Graphics,this.border_box.lineStyle(dim/50,0,1),this.border_box.beginFill(0,.5),this.border_box.drawRect(0,0,stage_width,stage_height),this.map.addChild(this.border_box),this.units=new PIXI.Graphics,this.map.addChild(this.units),this.map.interactive=!0,this.view=new PIXI.Graphics,this.map.addChild(this.view),this.updateMap_count=0,this.updateMap_time=10,this.r=big_dim/5,this.scale=this.r/stage_width,this.map.scale.set(this.scale)},init:function(){stage0.addChild(this.map)},update:function(){if(gamestate==GameState.InPlay&&(this.updateMap_count++,!(this.updateMap_count<this.updateMap_time))){this.updateMap_count=0,this.update_viewbox();var a=this.units;a.clear(),game.teams.forEach(function(b){a.beginFill(b.color,1),b.characters.forEach(function(b){b.forEach(function(b){a.drawRect(b.pos.x,b.pos.y,100,100)})}),a.endFill()})}},update_viewbox:function(){this.view.clear(),this.view.lineStyle(dim/80,16711680,1),this.view.drawRect(ScreenPos.left,ScreenPos.top,width,height)},onTouchStart:function(a){console.log("minimappress");var b=MousePos.x/this.map.width*stage_width,c=MousePos.y/this.map.height*stage_height;panTo(b,c)}};